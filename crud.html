<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>CRUD Montres</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Styles: tout-en-un pour être autonome -->
  <link rel="stylesheet" href="styles/crud.css">

 <!-- dans <head> -->
<script src="js/crud.js" defer></script>


  <!-- Librairies ZIP (optionnelles si tu utilises downloadZip) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip-utils/0.1.0/jszip-utils.min.js"></script>
</head>

<body>

  <h1>Gestion des produits</h1>

  <div>
    <button onclick="window.open('https://docs.google.com/spreadsheets/d/1RImwBSEucX0d6chHduucER-GVvM_nzlSFmvAjlQnScg/edit?usp=sharing', '_blank')">GoogleSheet</button>
    <button onclick="downloadZip()">Télécharger ZIP</button>
    <button onclick="window.location.href='index.html'">🏠 Voir les produits</button>
    <button onclick="openAddModal()">➕ Ajouter un produit</button>
    <button onclick="downloadProduitsCSV()">📄 Créer produits.csv</button>
    <button onclick="sendSQLiteDataToServer()">📤 Envoyer données vers serveur</button>
    <button onclick="window.location.href='creerZip.php'">📄 Créer Zip pour tablette</button>
  </div>

  <div id="filters" style="margin-bottom: 12px;">
    <button onclick="filterCategory('All')">📦 Tous</button>
    <button onclick="filterCategory('Montres')">⌚ Montres</button>
    <button onclick="filterCategory('Chaussures')">👟 Chaussures</button>
    <button onclick="filterCategory('Autres')">📁 Autres</button>
  </div>

  <table>
    <!-- Largeurs fixes (total = 100%) pour éviter tout espace vide -->
    <colgroup>
      <col style="width:8%"><!-- Reference -->
      <col style="width:10%"><!-- Nom -->
      <col style="width:8%"><!-- Prix -->
      <col style="width:8%"><!-- Promotion -->
      <col style="width:22%"><!-- Description -->
      <col style="width:28%"><!-- Images -->
      <col style="width:6%"><!-- Actions -->
      <col style="width:5%"><!-- Catégorie -->
      <col style="width:3%"><!-- État -->
      <col style="width:2%"><!-- Status -->
    </colgroup>

    <thead>
      <tr>
        <th>Reference</th>
        <th>Nom</th>
        <th>Prix</th>
        <th>Promotion</th>
        <th class="col-description">Description</th>
        <th>Images</th>
        <th>Actions</th>
        <th>Catégorie</th>
        <th>État</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="montreTable"></tbody>
  </table>

  <!-- Modale Slider -->
  <div id="modal">
    <button class="close" onclick="closeModal()">✖</button>
    <img id="modal-image" alt="">
    <div>
      <button onclick="prevImage()">⬅️</button>
      <button onclick="nextImage()">➡️</button>
    </div>
  </div>

  <!-- Modale Formulaire -->
  <div id="formModal">
    <form id="formMontre" enctype="multipart/form-data">
      <input type="hidden" name="id">
      <label>Reference : <input type="text" name="reference" required></label>
      <label>Nom : <input type="text" name="nom" required></label>
      <label>Prix : <input type="number" name="prix" required></label>
      <label>Promotion : <input type="number" name="promotion" placeholder="entrer le nouveau prix"></label>
      <label>Description : <textarea name="description" rows="3" required></textarea></label>
      <label>Image 1 : <input type="file" name="image1" accept="image/*"></label>
      <label>Image 2 : <input type="file" name="image2" accept="image/*"></label>
      <label>Image 3 : <input type="file" name="image3" accept="image/*"></label>
      <label>Image 4 : <input type="file" name="image4" accept="image/*"></label>
      <label>Catégorie :
        <select name="categorie">
          <option>Montres</option>
          <option>Chaussures</option>
          <option>Autres</option>
        </select>
      </label>
      <label>Etat : <input type="text" name="etat" value="Neuf" required></label>
      <label>Status :
        <select name="status">
          <option value="disponible">Disponible</option>
          <option value="achat en cours">Achat en cours</option>
          <option value="vendu">Vendu</option>
        </select>
      </label>
      <div style="margin-top:10px">
        <button type="submit">💾 Enregistrer</button>
        <button type="button" onclick="closeModalForm()">❌ Annuler</button>
      </div>
    </form>
  </div>

  <div id="spinner"><div></div></div>

  
</body>
</html>
